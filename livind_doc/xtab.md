- **概要**
  「Xtab」は `XtabProvider` クラス（`IStatelessNextEditProvider` 実装）に紐づいた仕組みで、カーソルや直前の変更履歴から「次の編集」を自動生成するための LLM 呼び出しを組み立てます。ユーザーの選択からトークン制限、遅延、リトライ制御まで含めたプロンプト/エンドポイント選択を行い、編集候補のフィルターをかけた結果だけを `pushEdit` に流します。[src/extension/xtab/node/xtabProvider.ts#L70-L370]

- **編集ストリーミングと差分処理**
  `streamEdits` では Xtab API をストリーミングモードで叩き、タグ付きレスポンス（`<EDIT>`/`<INSERT>`/`NO_CHANGE` 等）を解析して差分（`ResponseProcessor.diff` など）経由で行単位編集に分解、最初の編集には人工遅延を入れながら `pushEdit` で順次流します。レスポンス失敗時の再試行、カーソル移動予測、ログ記録や telemetry との連携も含まれています。[src/extension/xtab/node/xtabProvider.ts#L487-L875]

- **周辺ロジック**
  トークン計算や言語コンテキスト取得、モデル／プロンプト構成、プロキシ経由のエンドポイント判定、マージコンフリクトマーカー検出などのユーティリティも Xtab プロバイダの責務で、これらを通じて既存のコンフィグと接続しつつ候補生成領域を制御しています。[src/extension/xtab/node/xtabProvider.ts#L878-L1150]

これらをまとめると、「xtab」は inline edit（次の編集案）を生成するための統合レイヤーであり、ユーザー文脈の取り込み、プロンプト構成、ストリーミング応答処理、差分化を一気通貫で実装しているコンポーネントです。必要であれば、挙動を変える実験設定や telemetry 設定を確認・調整するのが自然な次のステップになります。
